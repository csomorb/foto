<div class="photo">
  <div class="photo-view-container">
    <picture>
      <source media="(max-width: 320px)" srcset="{{photoBaseUrl + albumService?.currentPhoto?.src320}}">
      <source media="(max-width: 640px)" srcset="{{photoBaseUrl + albumService?.currentPhoto?.src640}}">
      <source media="(max-width: 1280px)" srcset="{{photoBaseUrl + albumService?.currentPhoto?.src1280}}">
      <source media="(min-width: 1280px)" srcset="{{photoBaseUrl + albumService?.currentPhoto?.src1920}}">
      <img [src]="photoBaseUrl + this.albumService?.currentPhoto?.srcOrig" alt="{{ albumService?.currentPhoto?.title}}"/>
    </picture>
  </div>
  <div class="photo-detail">
    <div class="photo-navigation">
      <div (click)="movePrevPhoto()" class="navigation-item">
        <img *ngIf="albumService?.prevPhoto" [src]="photoBaseUrl + albumService?.prevPhoto?.src150" alt="Previous picture"/>
        <div *ngIf="albumService?.prevPhoto" class="arrow arrow-prev"></div>
      </div>
      <div (click)="returnGalery()" class="navigation-item arrow arrow-home">
      </div>
      <div (click)="moveNextPhoto()" class="navigation-item">
        <img *ngIf="albumService?.nextPhoto" [src]="photoBaseUrl + albumService?.nextPhoto?.src150" alt="Next picture"/>
        <div *ngIf="albumService?.nextPhoto" class="arrow arrow-next"></div>
      </div>
    </div>
    <div class="photo-prop">
      <div class="action-btn">
        <div *ngIf="albumService.currentAlbum?.coverPhoto?.idPhoto !== this.albumService.currentPhoto?.idPhoto" (click)="setCover()" class="btn-i btn-fav"></div>
        <div *ngIf="albumService.currentAlbum?.coverPhoto?.idPhoto === this.albumService.currentPhoto?.idPhoto" (click)="unsetCover()" class="btn-i btn-fav-set"></div>
        <div *ngIf="!deleteMode" (click)="toDeleteMode()" class="btn-i btn-trash"></div>
        <div *ngIf="deleteMode" (click)="cancelDeleteMode()" class="btn-i btn-cancel"></div>
        <div *ngIf="!editMode" (click)="toEditMode()" class="btn-i btn-edit"></div>
        <div *ngIf="editMode" (click)="cancelEditMode()" class="btn-i btn-cancel"></div>
      </div>
      <div *ngIf="deleteMode">
        Confirmez la suppression de la photo:
        <div class="btn btn-red" (click)="deletePhoto()">Supprimer</div>
      </div>
      <form (ngSubmit)="updatePhoto()">
        <div>
          <span class="prop-name">Titre</span><br/>
          <span *ngIf="!editMode" class="prop-content">{{albumService?.currentPhoto?.title}}</span>
          <div *ngIf="editMode" class="webflow-style-input">
            <input name="title" [(ngModel)]="photo.title" required placeholder="Title">
          </div>
        </div>
        <div *ngIf=" editMode || albumService?.currentPhoto?.description">
          <span class="prop-name">Description</span><br/>
          <span *ngIf="!editMode" class="prop-content">{{albumService?.currentPhoto?.description}}</span>
          <div *ngIf="editMode" class="webflow-style-input">
            <textarea name="description" [(ngModel)]="photo.description" placeholder="Description"></textarea>
          </div>
        </div>
        <div>
          <span class="prop-name">Pris le</span><br/>
          <span *ngIf="!editMode" class="prop-content">{{albumService?.currentPhoto?.shootDate | date:'yyyy/MM/dd HH:mm' }}</span>
          <div *ngIf="editMode" class="webflow-style-input">
            <input [owlDateTime]="dt1" [owlDateTimeTrigger]="dt1" placeholder="{{albumService?.currentPhoto?.shootDate | date:'yyyy/MM/dd HH:mm' }}" [(ngModel)]="photo.shootDate" name="shootDate">
            <owl-date-time #dt1 [startAt]="photo.shootDate" panelClass="test"></owl-date-time>
          </div>
        </div>
        <div *ngIf="editMode" (click)="updatePhoto()" class="btn btn-save">Enregistrer</div>
      </form>
      <div>
        <span class="prop-name">Ajouté le</span><br/>
        <span class="prop-content">{{albumService?.currentPhoto?.createAt | date:'yyyy/MM/dd HH:mm' }}</span>
      </div>
      <div>
        <span class="prop-name">Modifié le</span><br/>
        <span class="prop-content">{{albumService?.currentPhoto?.updatedAt | date:'yyyy/MM/dd HH:mm' }}</span>
      </div>
      <div>
        <span class="prop-name">Poids</span><br/>
        <span class="prop-content">{{albumService?.currentPhoto?.weight | fileSize }}</span>
      </div>
      <div *ngIf="albumService?.currentPhoto?.alti">
        <span class="prop-name">Altitude</span><br/>
        <span class="prop-content">{{albumService?.currentPhoto?.alti}} m</span>
      </div>
      <div>
        <span class="prop-name">Dimensions</span><br/>
        <span class="prop-content">{{albumService?.currentPhoto?.width}} x {{albumService?.currentPhoto?.height}} pixel</span>
      </div>
    </div>
  </div>
</div>
